<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>微信 (WeChat) Provider - Double Entry Generator 文档</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        code {
            background-color: #f8f9fa;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .back-link {
            margin-bottom: 20px;
        }
        .back-link a {
            color: #3498db;
            text-decoration: none;
        }
        .back-link a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="back-link">
        <a href="../index.html">← 返回文档主页</a>
    </div>

    <h1>微信 (WeChat) Provider</h1>
    
    <p>微信 Provider 支持将微信账单转换为 Beancount/Ledger 格式。</p>

    <h2>支持的文件格式</h2>
    <ul>
        <li>CSV 格式（默认）</li>
        <li>XLSX 格式（新增支持）</li>
    </ul>

    <h2>使用方法</h2>

    <h3>基本命令</h3>
    <pre><code># 转换 CSV 格式的微信账单
double-entry-generator translate -p wechat -t beancount wechat_records.csv

# 转换 XLSX 格式的微信账单
double-entry-generator translate -p wechat -t beancount wechat_records.xlsx</code></pre>

    <h3>配置文件</h3>
    <p>创建配置文件 <code>config.yaml</code>：</p>
    <pre><code>defaultMinusAccount: Assets:FIXME
defaultPlusAccount: Expenses:FIXME
defaultCashAccount: Assets:WeChat
defaultCurrency: CNY
title: 微信账单转换

wechat:
  rules:
    - item: 三快
      targetAccount: Expenses:Food
    - item: 电子商务,天猫,京东,特约商户
      targetAccount: Expenses:Shopping
    - item: 电费,网上国网
      targetAccount: Expenses:Electricity
    - item: 滴滴出行,嘀嘀,中国石油
      targetAccount: Expenses:Transport
    - item: 现金奖励
      targetAccount: Income:Rewards
    - item: 财付通(银联云闪付)
      ignore: true
    - item: 财付通还款
      targetAccount: Assets:WeChat</code></pre>

    <h2>配置说明</h2>

    <h3>全局配置</h3>
    <ul>
        <li><code>defaultMinusAccount</code>: 默认金额减少的账户</li>
        <li><code>defaultPlusAccount</code>: 默认金额增加的账户</li>
        <li><code>defaultCashAccount</code>: 微信账户（等同于支付宝中的 <code>methodAccount</code>）</li>
        <li><code>defaultCurrency</code>: 默认货币</li>
    </ul>

    <h3>规则配置</h3>
    <p>微信 Provider 提供基于规则的匹配，可以指定：</p>
    <ul>
        <li><code>item</code>（交易描述）的完全/包含匹配</li>
        <li><code>peer</code>（交易对方）的完全/包含匹配</li>
        <li><code>type</code>（交易类型）的完全/包含匹配</li>
        <li><code>time</code>（交易时间）的区间匹配</li>
        <li><code>minPrice</code>（最小金额）和 <code>maxPrice</code>（最大金额）的区间匹配</li>
    </ul>

    <h3>规则选项</h3>
    <ul>
        <li><code>sep</code>: 分隔符，默认为 <code>,</code></li>
        <li><code>fullMatch</code>: 是否使用完全匹配，默认为 <code>false</code></li>
        <li><code>tag</code>: 设置流水的 Tag</li>
        <li><code>ignore</code>: 是否忽略匹配的交易，默认为 <code>false</code></li>
    </ul>

    <h2>账户关系</h2>
    <p><code>targetAccount</code> 与 <code>defaultCashAccount</code> 的增减账户关系：</p>
    <table border="1" style="border-collapse: collapse; width: 100%;">
        <tr>
            <th>收/支</th>
            <th>minusAccount</th>
            <th>plusAccount</th>
        </tr>
        <tr>
            <td>收入</td>
            <td>targetAccount</td>
            <td>defaultCashAccount</td>
        </tr>
        <tr>
            <td>支出</td>
            <td>defaultCashAccount</td>
            <td>targetAccount</td>
        </tr>
    </table>

    <h2>示例文件</h2>
    <ul>
        <li><a href="../../example/wechat/example-wechat-records.csv">微信账单示例 (CSV)</a></li>
        <li><a href="../../example/wechat/example-wechat-records.xlsx">微信账单示例 (XLSX)</a></li>
        <li><a href="../../example/wechat/config.yaml">配置示例</a></li>
    </ul>
</body>
</html> 